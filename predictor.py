#!/usr/bin/env python
# coding: utf-8

# In[ ]:


# å¯¼å…¥æ ¸å¿ƒåº“
import streamlit as st
import joblib
import numpy as np
import pandas as pd
import shap
import matplotlib.pyplot as plt
import io
from PIL import Image
from decimal import Decimal, ROUND_HALF_UP

# ===================== å…¨å±€é…ç½®ä¸å¸¸é‡å®šä¹‰ï¼ˆä¼˜åŒ–ï¼šæå–å¸¸é‡ï¼Œæ–¹ä¾¿ç»´æŠ¤ï¼‰ =====================
# å›¾è¡¨é…ç½®
plt.rcParams['axes.unicode_minus'] = False
plt.rcParams['figure.dpi'] = 150
plt.rcParams['savefig.dpi'] = 150
plt.rcParams['figure.figsize'] = (12, 4)

# æ¨¡å‹æ–‡ä»¶è·¯å¾„ï¼ˆæå–å¸¸é‡ï¼Œæ–¹ä¾¿ä¿®æ”¹ï¼‰
MODEL_PATH = 'GBD.pkl'

# ç‰¹å¾é…ç½®ï¼ˆåŒ…å«åç§°ã€ä¸­æ–‡å«ä¹‰ã€å•ä½ï¼Œæ–¹ä¾¿åç»­æ‰©å±•ï¼‰
FEATURE_CONFIG = {
    "AGE": {"cn_name": "å¹´é¾„", "unit": "", "min": 0, "max": float('inf'), "is_float": False, "default": 0},
    "ALB": {"cn_name": "ç™½è›‹ç™½", "unit": "g/L", "min": 0, "max": float('inf'), "is_float": False, "default": 0},
    "GLO": {"cn_name": "çƒè›‹ç™½", "unit": "g/L", "min": 0, "max": float('inf'), "is_float": False, "default": 0},
    "FBG": {"cn_name": "ç©ºè…¹è¡€ç³–", "unit": "mmol/L", "min": 0, "max": float('inf'), "is_float": True, "default": 0},
    "SBP": {"cn_name": "æ”¶ç¼©å‹", "unit": "mmHg", "min": 0, "max": float('inf'), "is_float": True, "default": 0},
    "AST": {"cn_name": "è°·è‰è½¬æ°¨é…¶", "unit": "U/L", "min": 0, "max": float('inf'), "is_float": False, "default": 0},
    "DBP": {"cn_name": "èˆ’å¼ å‹", "unit": "mmHg", "min": 0, "max": float('inf'), "is_float": True, "default": 0},
    "BUN": {"cn_name": "è¡€æ¸…å°¿ç´ æ°®", "unit": "mmol/L", "min": 0, "max": float('inf'), "is_float": False, "default": 0},
    "BMI": {"cn_name": "ä½“è´¨æŒ‡æ•°", "unit": "", "min": 0, "max": float('inf'), "is_float": False, "default": 0}
}
FEATURE_NAMES = list(FEATURE_CONFIG.keys())

# å²—ä½é…ç½®ï¼ˆç›´æ¥æ˜¾ç¤ºä¸­æ–‡ï¼Œæ— éœ€æ•°å­—æ˜ å°„ï¼Œä¼˜åŒ–ï¼šæå‡ç”¨æˆ·æ“ä½œä¾¿æ·æ€§ï¼‰
JOB_OPTIONS = ["æœºåŠ¡äººå‘˜", "è½¦åŠ¡äººå‘˜", "ç”µåŠ¡ä¾›ç”µäººå‘˜", "å·¥åŠ¡äººå‘˜", "è¡Œæ”¿åŠå…¶ä»–äººå‘˜"]

# ========== å²—ä½-æŒ‡æ ‡-é˜ˆå€¼å»ºè®®å­—å…¸ï¼ˆä¿ç•™åŸå†…å®¹ï¼Œæ— ä¿®æ”¹ï¼‰ ==========
job_advice_dict = {
    "æœºåŠ¡äººå‘˜": {
        "BMI": {
            "<18.5": """**ä½ä½“é‡ï¼ˆBMI < 18.5ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ è›‹ç™½è´¨å’Œæ€»çƒ­é‡æ‘„å…¥ã€‚æ—¥å¸¸å¤šé€‰æ‹©é¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ç­‰ä¼˜è´¨è›‹ç™½ï¼Œé€‚å½“å¢åŠ åšæœã€å…¨éº¦é£Ÿå“ç­‰èƒ½é‡å¯†åº¦è¾ƒé«˜çš„é£Ÿç‰©ï¼Œè§„å¾‹ä¸‰é¤å¹¶é€‚å½“åŠ é¤ï¼Œä¿è¯æ¯é¤è›‹ç™½è´¨+ç¢³æ°´åŒ–åˆç‰©çš„æ­é…ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šä»¥åŠ›é‡è®­ç»ƒä¸ºä¸»ï¼ˆè‡ªé‡è®­ç»ƒã€å¼¹åŠ›å¸¦è®­ç»ƒï¼‰ï¼Œæ¯å‘¨è‡³å°‘2æ¬¡ï¼Œé…åˆé€‚åº¦æœ‰æ°§è¿åŠ¨ï¼ˆæ•£æ­¥/æ¸¸æ³³ï¼‰ï¼Œå¢å¼ºä½“èƒ½ã€‚""",
            "18.5-24": """**æ­£å¸¸ä½“é‡ï¼ˆ18.5 â‰¤ BMI < 24ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¿æŒå‡è¡¡é¥®é£Ÿï¼Œåˆç†æ­é…ä¸»é£Ÿã€è”¬èœæ°´æœå’Œä¼˜è´¨è›‹ç™½ï¼Œæ§åˆ¶æ²¹è„‚å’Œé«˜ç³–é£Ÿç‰©æ‘„å…¥ï¼Œé¿å…æš´é¥®æš´é£Ÿã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å‘¨ç´¯è®¡ä¸å°‘äº150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨ï¼ˆå¿«èµ°ã€éª‘è½¦ï¼‰ï¼Œå‡å°‘ä¹…åï¼Œç»´æŒå¿ƒè‚ºåŠŸèƒ½ã€‚""",
            "24-28": """**è¶…é‡ï¼ˆ24 â‰¤ BMI < 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šé€‚å½“æ§åˆ¶æ€»çƒ­é‡ï¼Œå‡å°‘ç²¾åˆ¶ç¢³æ°´ï¼ˆç™½ç±³é¥­ã€ç™½é¢åˆ¶å“ï¼‰å’Œæ²¹ç‚¸ã€ç”œé£Ÿï¼Œå¢åŠ å…¨è°·ç‰©ã€è”¬èœå’Œä¼˜è´¨è›‹ç™½æ¯”ä¾‹ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©ä¸å°‘äº30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œé…åˆæ¯å‘¨2æ¬¡åŠ›é‡è®­ç»ƒï¼Œæé«˜åŸºç¡€ä»£è°¢ã€‚""",
            "â‰¥28": """**è‚¥èƒ–ï¼ˆBMI â‰¥ 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§åˆ¶æ€»èƒ½é‡æ‘„å…¥ï¼Œå‡å°‘ç²¾åˆ¶ä¸»é£Ÿã€ç”œé£Ÿå’Œæ²¹ç‚¸é£Ÿå“ï¼Œå¤šé€‰æ‹©è”¬èœã€ä½è„‚é«˜è›‹ç™½é£Ÿç‰©ï¼ˆé±¼ã€é¸¡èƒ¸è‚‰ã€ä½è„‚å¥¶ï¼‰ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šèº«ä½“å…è®¸æ—¶æ¯å¤©ä¸å°‘äº45åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨ï¼Œç»“åˆè§„å¾‹åŠ›é‡è®­ç»ƒï¼Œä¿ƒè¿›ä½“é‡ç¨³å®šä¸‹é™ã€‚"""
        },
        "ALB": {
            "<40": """**ç™½è›‹ç™½åä½ï¼ˆAlb < 40 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ ä¼˜è´¨è›‹ç™½å’Œæ€»èƒ½é‡æ‘„å…¥ï¼Œå¤šåƒé¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ã€è±†åˆ¶å“ï¼Œä¿è¯ä¸»é£Ÿå……è¶³ï¼Œå€’ç­/å¤œç­åè¡¥å……å¥¶åˆ¶å“+é¸¡è›‹+ä¸»é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…é•¿æœŸç†¬å¤œå’Œé«˜å¼ºåº¦å€¼ç­ï¼Œä¿è¯ä¼‘æ¯ï¼›æ¯å‘¨2~3æ¬¡åŠ›é‡è®­ç»ƒ+è½»ä¸­åº¦æœ‰æ°§è¿åŠ¨ï¼ˆå¿«èµ°ã€æ‹‰ä¼¸ï¼‰ï¼Œæ”¹å–„ä»£è°¢ã€‚""",
            "40-55": """**ç™½è›‹ç™½æ­£å¸¸ï¼ˆ40 g/L â‰¤ Alb â‰¤ 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¿æŒå‡è¡¡é¥®é£Ÿï¼Œæ¯å¤©æ‘„å…¥é€‚é‡ä¼˜è´¨è›‹ç™½ï¼Œé¿å…â€œåªåƒä¸»é£Ÿä¸åƒè›‹ç™½â€æˆ–â€œé›¶é£Ÿä»£æ›¿æ­£é¤â€ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œå‡å°‘ç†¬å¤œï¼›æ¯å‘¨ç´¯è®¡150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨+ç®€å•åŠ›é‡è®­ç»ƒï¼Œç»´æŒèº«ä½“æœºèƒ½ã€‚""",
            ">55": """**ç™½è›‹ç™½åé«˜ï¼ˆAlb > 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ æ¯æ—¥é¥®æ°´é‡ï¼Œé¿å…æµ“èŒ¶/å’–å•¡ä»£æ›¿ç™½æ°´ï¼Œé¥®é£Ÿæ¸…æ·¡å‡è¡¡ï¼Œæ— éœ€åˆ»æ„å¢åŠ é«˜è›‹ç™½é£Ÿç‰©ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå·¥ä½œæœŸé—´å®šæ—¶è¡¥æ°´ï¼Œå°¤å…¶å¤œç­/å€¼å®ˆåï¼›é€‚åº¦æœ‰æ°§æ´»åŠ¨ï¼ˆæ•£æ­¥ï¼‰ï¼Œä¿ƒè¿›ä½“æ¶²å¾ªç¯ã€‚"""
        },
        "GLO": {
            "<20": """**çƒè›‹ç™½åä½ï¼ˆGlob < 20 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ ä¼˜è´¨è›‹ç™½å’Œå…¨é¢è¥å…»ï¼Œå¤šåƒé¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ã€è±†åˆ¶å“ï¼Œæ­é…ä¸»é£Ÿå’Œè”¬èœæ°´æœï¼Œé¿å…é¥®é£Ÿå•ä¸€ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œå……è¶³ç¡çœ ï¼Œé¿å…ç†¬å¤œï¼›æ¯å‘¨2~3æ¬¡é€‚åº¦æœ‰æ°§è¿åŠ¨ï¼ˆå¿«èµ°ï¼‰ï¼Œå¢å¼ºä½“è´¨ã€‚""",
            "20-35": """**çƒè›‹ç™½æ­£å¸¸ï¼ˆ20 g/L â‰¤ Glob â‰¤ 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œæ­é…è‚‰ç±»ã€è›‹ç±»ã€å¥¶åˆ¶å“ã€è”¬èœå’Œä¸»é£Ÿï¼Œé¿å…åé£Ÿæˆ–é•¿æœŸé«˜æ²¹é«˜ç³–é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…ä¹…åï¼›æ¯å‘¨é€‚é‡æœ‰æ°§æ´»åŠ¨ï¼ˆå¿«èµ°ã€éª‘è½¦ï¼‰ï¼Œç»´æŒèº«ä½“çŠ¶æ€ã€‚""",
            ">35": """**çƒè›‹ç™½åé«˜ï¼ˆGlob > 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šé¥®é£Ÿæ¸…æ·¡ï¼Œå‡å°‘æ²¹è…»ã€è¾›è¾£åˆºæ¿€æ€§é£Ÿç‰©ï¼Œå¤šåƒè”¬èœæ°´æœï¼Œé¿å…é‡å£å‘³é¥®é£ŸåŠ é‡ç‚ç—‡è´Ÿæ‹…ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…ç–²åŠ³ä½œä¸šï¼›åå¤åé«˜å»ºè®®å¤æŸ¥ï¼Œé€‚å½“æ¸©å’Œæœ‰æ°§è¿åŠ¨æ”¹å–„çŠ¶æ€ã€‚"""
        },
        "FBG": {
            "<6.1": """**ç©ºè…¹è¡€ç³–æ­£å¸¸ï¼ˆFBG < 6.1 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šè§„å¾‹ä¸‰é¤ï¼Œæ§åˆ¶ç”œé£Ÿå’Œå«ç³–é¥®æ–™ï¼Œä¸»é£Ÿç²—ç»†æ­é…ï¼Œå¤šåƒè”¬èœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åï¼Œæ¯å¤©é€‚é‡æ´»åŠ¨ï¼ˆå¿«èµ°ã€ä¸Šä¸‹æ¥¼æ¢¯ï¼‰ï¼Œç»´æŒè¡€ç³–ä»£è°¢ã€‚""",
            "6.1-7.0": """**ç©ºè…¹è¡€ç³–åé«˜ï¼ˆ6.1 â‰¤ FBG < 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘ç²¾åˆ¶ç¢³æ°´å’Œç”œé£Ÿï¼Œæ§åˆ¶ä¸»é£Ÿæ€»é‡ï¼Œå¤šé€‰æ‹©å…¨è°·ç‰©å’Œè”¬èœï¼Œé¿å…å¤œå®µå’Œæš´é¥®æš´é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©ä¸å°‘äº30åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨ï¼ˆå¿«èµ°ï¼‰ï¼Œæ”¹å–„èƒ°å²›ç´ æ•æ„Ÿæ€§ã€‚""",
            "â‰¥7.0": """**ç©ºè…¹è¡€ç³–æ˜æ˜¾å‡é«˜ï¼ˆFBG â‰¥ 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§åˆ¶æ€»èƒ½é‡å’Œç³–ç±»æ‘„å…¥ï¼Œå‡å°‘ç±³é¢ã€ç”œé£Ÿå’Œå«ç³–é¥®æ–™ï¼Œå¤šåƒæ¸…æ·¡é«˜çº¤ç»´é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šåœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹è§„å¾‹è¿åŠ¨ï¼ˆå¿«èµ°ï¼‰ï¼Œé¿å…ä¹…åï¼Œå»ºè®®è¿›ä¸€æ­¥å°±åŒ»è¯„ä¼°ã€‚"""
        },
        "AST": {
            "â‰¤40": """**è°·è‰è½¬æ°¨é…¶æ­£å¸¸ï¼ˆAST â‰¤ 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡è§„å¾‹é¥®é£Ÿï¼Œé¿å…é•¿æœŸé«˜æ²¹é«˜è„‚é¥®é£Ÿå’Œé¥®é…’ï¼Œç»´æŒè‚è„ä»£è°¢ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ç†¬å¤œå’Œè¿‡åº¦ç–²åŠ³ï¼Œé€‚åº¦æœ‰æ°§è¿åŠ¨ï¼Œç»´æŒèº«ä½“æœºèƒ½ã€‚""",
            ">40": """**è°·è‰è½¬æ°¨é…¶å‡é«˜ï¼ˆAST > 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘æ²¹è…»é£Ÿç‰©å’Œé…’ç²¾æ‘„å…¥ï¼Œå¤šåƒè”¬èœæ°´æœï¼Œæ¸…æ·¡é¥®é£Ÿå‡è½»è‚è„è´Ÿæ‹…ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…è¿‡åº¦åŠ³ç´¯å’Œå‰§çƒˆè¿åŠ¨ï¼Œå»ºè®®å¤æŸ¥è‚åŠŸèƒ½ç›¸å…³æŒ‡æ ‡ã€‚"""
        },
        "BUN": {
            "<2.9": """**å°¿ç´ æ°®åä½ï¼ˆBUN < 2.9 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šé€‚å½“å¢åŠ ä¼˜è´¨è›‹ç™½ï¼ˆé¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ï¼‰ï¼Œé¿å…é¥®é£Ÿè¿‡äºæ¸…æ·¡ï¼Œä¿è¯è¥å…»å……è¶³ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…é•¿æœŸç–²åŠ³å’Œè¿‡åº¦æ¶ˆè€—ï¼Œæ”¹å–„ä»£è°¢çŠ¶æ€ã€‚""",
            "2.9-8.2": """**å°¿ç´ æ°®æ­£å¸¸ï¼ˆ2.9 mmol/L â‰¤ BUN â‰¤ 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œè›‹ç™½æ‘„å…¥é€‚é‡ï¼Œåˆç†æ­é…ä¸»é£Ÿã€è”¬èœå’Œè‚‰ç±»ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹é¥®æ°´ï¼Œé¿å…ä¹…åï¼Œé€‚å½“æ—¥å¸¸æ´»åŠ¨ï¼Œç»´æŒä»£è°¢ç¨³å®šã€‚""",
            ">8.2": """**å°¿ç´ æ°®åé«˜ï¼ˆBUN > 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶é«˜è›‹ç™½é¥®é£Ÿï¼Œå‡å°‘å¤§é±¼å¤§è‚‰ï¼Œå¢åŠ é¥®æ°´é‡ï¼Œé¥®é£Ÿæ¸…æ·¡å‡è½»è‚¾è„è´Ÿæ‹…ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ç–²åŠ³å’Œè„±æ°´ï¼Œå¤šæ¬¡åé«˜å»ºè®®è¿›ä¸€æ­¥æ£€æŸ¥è‚¾åŠŸèƒ½ã€‚"""
        },
        "è¡€å‹": {
            "æ­£å¸¸": """**è¡€å‹æ­£å¸¸ï¼ˆSBP < 140 ä¸” DBP < 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œæ§åˆ¶ç›å’Œæ²¹è„‚æ‘„å…¥ï¼Œè§„å¾‹è¿›é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åå’Œç²¾ç¥ç´§å¼ ï¼Œæ¯å‘¨é€‚é‡æœ‰æ°§è¿åŠ¨ï¼ˆå¿«èµ°ï¼‰ã€‚""",
            "åé«˜": """**è¡€å‹åé«˜ï¼ˆSBP â‰¥ 140 æˆ– DBP â‰¥ 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§åˆ¶é£Ÿç›æ‘„å…¥ï¼Œå‡å°‘è…Œåˆ¶å’Œé«˜æ²¹é£Ÿç‰©ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå‡è½»ä½“é‡ã€ç¼“è§£å‹åŠ›ï¼Œæ¯å¤©ä¸å°‘äº30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œå®šæœŸç›‘æµ‹è¡€å‹ã€‚"""
        }
    },
    "è½¦åŠ¡äººå‘˜": {
        "BMI": {
            "<18.5": """**ä½ä½“é‡ï¼ˆBMI < 18.5ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ è›‹ç™½è´¨å’Œæ€»çƒ­é‡æ‘„å…¥ï¼Œå¤šé€‰æ‹©é¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ç­‰ä¼˜è´¨è›‹ç™½ï¼Œé€‚å½“å¢åŠ åšæœã€å…¨éº¦é£Ÿå“ï¼Œè§„å¾‹ä¸‰é¤å¹¶åŠ é¤ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šåŠ›é‡è®­ç»ƒä¸ºä¸»ï¼Œé…åˆå¿«èµ°ã€æ¸¸æ³³ç­‰æœ‰æ°§è¿åŠ¨ï¼Œæ¯å‘¨2æ¬¡ä»¥ä¸Šï¼Œä¿ƒè¿›è‚Œè‚‰å’Œä½“åŠ›æ¢å¤ã€‚""",
            "18.5-24": """**æ­£å¸¸ä½“é‡ï¼ˆ18.5 â‰¤ BMI < 24ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œæ­é…ä¸»é£Ÿã€è”¬èœæ°´æœå’Œä¼˜è´¨è›‹ç™½ï¼Œæ§åˆ¶æ²¹è„‚å’Œé«˜ç³–é£Ÿç‰©ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å‘¨ç´¯è®¡ä¸å°‘äº150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨ï¼Œå‡å°‘ä¹…åï¼Œç»´æŒä½“èƒ½ã€‚""",
            "24-28": """**è¶…é‡ï¼ˆ24 â‰¤ BMI < 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶æ€»çƒ­é‡ï¼Œå‡å°‘ç²¾åˆ¶ç¢³æ°´å’Œæ²¹ç‚¸ã€ç”œé£Ÿï¼Œå¢åŠ å…¨è°·ç‰©å’Œè”¬èœæ¯”ä¾‹ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨+æ¯å‘¨2æ¬¡åŠ›é‡è®­ç»ƒï¼Œä¿ƒè¿›ä½“é‡æ§åˆ¶ã€‚""",
            "â‰¥28": """**è‚¥èƒ–ï¼ˆBMI â‰¥ 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§åˆ¶æ€»èƒ½é‡ï¼Œå‡å°‘ç²¾åˆ¶ä¸»é£Ÿã€ç”œé£Ÿå’Œæ²¹ç‚¸é£Ÿå“ï¼Œå¤šåƒè”¬èœå’Œä½è„‚é«˜è›‹ç™½é£Ÿç‰©ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šèº«ä½“å…è®¸æ—¶æ¯å¤©45åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨+è§„å¾‹åŠ›é‡è®­ç»ƒï¼Œé€æ­¥å‡é‡ã€‚"""
        },
        "ALB": {
            "<40": """**ç™½è›‹ç™½åä½ï¼ˆAlb < 40 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ ä¼˜è´¨è›‹ç™½å’Œæ€»èƒ½é‡ï¼Œå¤šåƒé¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ã€è±†åˆ¶å“ï¼Œä¿è¯ä¸»é£Ÿå……è¶³ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ç†¬å¤œå’Œç–²åŠ³ï¼Œæ¯å‘¨2~3æ¬¡åŠ›é‡è®­ç»ƒ+è½»ä¸­åº¦æœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„ä½“åŠ›ã€‚""",
            "40-55": """**ç™½è›‹ç™½æ­£å¸¸ï¼ˆ40 g/L â‰¤ Alb â‰¤ 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œè§„å¾‹è¿›é£Ÿï¼Œä¿è¯æ¯æ—¥è›‹ç™½æ‘„å…¥ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé€‚é‡æœ‰æ°§è¿åŠ¨+ç®€å•åŠ›é‡è®­ç»ƒï¼Œç»´æŒèº«ä½“æœºèƒ½ã€‚""",
            ">55": """**ç™½è›‹ç™½åé«˜ï¼ˆAlb > 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ é¥®æ°´é‡ï¼Œé¥®é£Ÿæ¸…æ·¡ï¼Œæ— éœ€åˆ»æ„è¡¥è›‹ç™½ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå·¥ä½œæœŸé—´å®šæ—¶è¡¥æ°´ï¼Œé€‚åº¦æœ‰æ°§æ´»åŠ¨ä¿ƒè¿›ä½“æ¶²å¾ªç¯ã€‚"""
        },
        "GLO": {
            "<20": """**çƒè›‹ç™½åä½ï¼ˆGlob < 20 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå…¨é¢è¥å…»ï¼Œå¤šåƒä¼˜è´¨è›‹ç™½+ä¸»é£Ÿ+è”¬èœæ°´æœï¼Œé¿å…é¥®é£Ÿå•ä¸€ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œå……è¶³ç¡çœ ï¼Œæ¯å‘¨2~3æ¬¡å¿«èµ°ç­‰æœ‰æ°§è¿åŠ¨ï¼Œå¢å¼ºæŠµæŠ—åŠ›ã€‚""",
            "20-35": """**çƒè›‹ç™½æ­£å¸¸ï¼ˆ20 g/L â‰¤ Glob â‰¤ 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œé¿å…åé£Ÿæˆ–é«˜æ²¹é«˜ç³–é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…ä¹…åï¼Œæ¯å‘¨é€‚é‡æœ‰æ°§æ´»åŠ¨ç»´æŒçŠ¶æ€ã€‚""",
            ">35": """**çƒè›‹ç™½åé«˜ï¼ˆGlob > 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œå‡å°‘æ²¹è…»è¾›è¾£é£Ÿç‰©ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…ç–²åŠ³ï¼›åå¤åé«˜å»ºè®®å¤æŸ¥ç‚ç—‡æŒ‡æ ‡ã€‚"""
        },
        "FBG": {
            "<6.1": """**ç©ºè…¹è¡€ç³–æ­£å¸¸ï¼ˆFBG < 6.1 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šè§„å¾‹ä¸‰é¤ï¼Œä¸»é£Ÿç²—ç»†æ­é…ï¼Œæ§åˆ¶ç”œé£Ÿå’Œå«ç³–é¥®æ–™ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åï¼Œæ¯å‘¨è§„å¾‹æœ‰æ°§è¿åŠ¨ï¼Œç»´æŒä»£è°¢ã€‚""",
            "6.1-7.0": """**ç©ºè…¹è¡€ç³–åé«˜ï¼ˆ6.1 â‰¤ FBG < 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘ç²¾åˆ¶ç¢³æ°´å’Œç”œé£Ÿï¼Œæ§åˆ¶ä¸»é£Ÿé‡ï¼Œå¤šåƒå…¨è°·ç‰©å’Œè”¬èœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„è¡€ç³–æ§åˆ¶ã€‚""",
            "â‰¥7.0": """**ç©ºè…¹è¡€ç³–æ˜æ˜¾å‡é«˜ï¼ˆFBG â‰¥ 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§ç³–å’Œç²¾åˆ¶ä¸»é£Ÿï¼Œæ¸…æ·¡é«˜çº¤ç»´é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šåŒ»ç”ŸæŒ‡å¯¼ä¸‹è§„å¾‹è¿åŠ¨ï¼Œå°½å¿«å°±åŒ»è¯„ä¼°ã€‚"""
        },
        "AST": {
            "â‰¤40": """**è°·è‰è½¬æ°¨é…¶æ­£å¸¸ï¼ˆAST â‰¤ 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œé¿å…é«˜æ²¹é«˜è„‚å’Œé¥®é…’ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…ç†¬å¤œï¼Œé€‚åº¦æœ‰æ°§è¿åŠ¨ã€‚""",
            ">40": """**è°·è‰è½¬æ°¨é…¶å‡é«˜ï¼ˆAST > 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘æ²¹è…»å’Œé…’ç²¾ï¼Œæ¸…æ·¡é¥®é£Ÿå‡è½»è‚è„è´Ÿæ‹…ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…ç†¬å¤œå’Œå‰§çƒˆè¿åŠ¨ï¼Œå¤æŸ¥è‚åŠŸèƒ½ã€‚"""
        },
        "BUN": {
            "<2.9": """**å°¿ç´ æ°®åä½ï¼ˆBUN < 2.9 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ ä¼˜è´¨è›‹ç™½æ‘„å…¥ï¼Œé¿å…é¥®é£Ÿè¿‡äºæ¸…æ·¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…é•¿æœŸç–²åŠ³ï¼Œæ”¹å–„ä»£è°¢ã€‚""",
            "2.9-8.2": """**å°¿ç´ æ°®æ­£å¸¸ï¼ˆ2.9 mmol/L â‰¤ BUN â‰¤ 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œè›‹ç™½æ‘„å…¥é€‚é‡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹é¥®æ°´ï¼Œé€‚å½“æ´»åŠ¨ï¼Œç»´æŒä»£è°¢ç¨³å®šã€‚""",
            ">8.2": """**å°¿ç´ æ°®åé«˜ï¼ˆBUN > 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶é«˜è›‹ç™½é¥®é£Ÿï¼Œå¢åŠ é¥®æ°´é‡ï¼Œé¥®é£Ÿæ¸…æ·¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…è„±æ°´å’Œç–²åŠ³ï¼Œå¤šæ¬¡åé«˜å»ºè®®æŸ¥è‚¾åŠŸèƒ½ã€‚"""
        },
        "è¡€å‹": {
            "æ­£å¸¸": """**è¡€å‹æ­£å¸¸ï¼ˆSBP < 140 ä¸” DBP < 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œæ§ç›æ§æ²¹ï¼Œå‡å°‘è…Œåˆ¶é£Ÿç‰©ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…ç´§å¼ ï¼Œæ¯å‘¨é€‚é‡æœ‰æ°§è¿åŠ¨ã€‚""",
            "åé«˜": """**è¡€å‹åé«˜ï¼ˆSBP â‰¥ 140 æˆ– DBP â‰¥ 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼é™ç›ï¼Œå‡å°‘é«˜æ²¹é£Ÿç‰©ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå‡é‡å‡å‹ï¼Œæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œå®šæœŸç›‘æµ‹è¡€å‹ã€‚"""
        }
    },
    "ç”µåŠ¡ä¾›ç”µäººå‘˜": {
        "BMI": {
            "<18.5": """**ä½ä½“é‡ï¼ˆBMI < 18.5ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ è›‹ç™½è´¨å’Œæ€»çƒ­é‡ï¼Œå¤šåƒä¼˜è´¨è›‹ç™½+åšæœ+å…¨éº¦é£Ÿå“ï¼Œè§„å¾‹ä¸‰é¤åŠ é¤ï¼Œæ”¹å–„ä½“åŠ›å‚¨å¤‡ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šåŠ›é‡è®­ç»ƒä¸ºä¸»ï¼Œé…åˆå¿«èµ°/æ¸¸æ³³ï¼Œæ¯å‘¨2æ¬¡ä»¥ä¸Šï¼Œä¿ƒè¿›è‚Œè‚‰å’Œä½“èƒ½æ¢å¤ã€‚""",
            "18.5-24": """**æ­£å¸¸ä½“é‡ï¼ˆ18.5 â‰¤ BMI < 24ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œé¿å…é¥®é£Ÿä¸è§„å¾‹ï¼Œç»´æŒä½“èƒ½ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å‘¨150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨+åŠ›é‡è®­ç»ƒï¼Œç»´æŒä½œä¸šè€å—èƒ½åŠ›ã€‚""",
            "24-28": """**è¶…é‡ï¼ˆ24 â‰¤ BMI < 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶æ€»çƒ­é‡ï¼Œå‡å°‘ç²¾åˆ¶ç¢³æ°´å’Œæ²¹ç‚¸ç”œé£Ÿï¼Œå¢åŠ å…¨è°·ç‰©å’Œè”¬èœã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨+æ¯å‘¨2æ¬¡åŠ›é‡è®­ç»ƒï¼Œå‡è½»ä½œä¸šè´Ÿæ‹…ã€‚""",
            "â‰¥28": """**è‚¥èƒ–ï¼ˆBMI â‰¥ 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§èƒ½ï¼Œå‡å°‘ç²¾åˆ¶ä¸»é£Ÿå’Œæ²¹ç‚¸é£Ÿå“ï¼Œå¤šåƒè”¬èœå’Œä½è„‚è›‹ç™½ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šèº«ä½“å…è®¸æ—¶æ¯å¤©45åˆ†é’Ÿæœ‰æ°§è¿åŠ¨+åŠ›é‡è®­ç»ƒï¼Œé™ä½ä½œä¸šé£é™©ã€‚"""
        },
        "ALB": {
            "<40": """**ç™½è›‹ç™½åä½ï¼ˆAlb < 40 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šé‡ç‚¹è¡¥å……ä¼˜è´¨è›‹ç™½å’Œèƒ½é‡ï¼Œå¤šåƒé¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ï¼Œä¿è¯ä¸»é£Ÿå……è¶³ï¼Œé¿å…é‡å¤–ä½œä¸šå‡‘åˆåƒé¥­ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šä¿è¯ä¼‘æ¯ï¼Œé¿å…è¿ç»­é«˜å¼ºåº¦ä½œä¸šï¼›æ¯å‘¨2~3æ¬¡åŠ›é‡è®­ç»ƒ+è½»æœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„ä½“èƒ½åˆæˆã€‚""",
            "40-55": """**ç™½è›‹ç™½æ­£å¸¸ï¼ˆ40 g/L â‰¤ Alb â‰¤ 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¿æŒå‡è¡¡é¥®é£Ÿï¼Œç¨³å®šè›‹ç™½å’Œä¸»é£Ÿæ‘„å…¥ï¼Œé¿å…ä½œä¸šç¯å¢ƒå½±å“é¥®é£Ÿè´¨é‡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé€‚é‡è¿åŠ¨ï¼Œç»´æŒä½“åŠ›å‚¨å¤‡ã€‚""",
            ">55": """**ç™½è›‹ç™½åé«˜ï¼ˆAlb > 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ é¥®æ°´é‡ï¼Œå°¤å…¶é«˜æ¸©ä½œä¸šååŠæ—¶è¡¥æ°´ï¼Œé¥®é£Ÿæ¸…æ·¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šä½œä¸šä¸­åˆ†æ¬¡è¡¥æ°´ï¼Œé€‚åº¦æœ‰æ°§æ´»åŠ¨ä¿ƒè¿›ä½“æ¶²å¾ªç¯ã€‚"""
        },
        "GLO": {
            "<20": """**çƒè›‹ç™½åä½ï¼ˆGlob < 20 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå…¨é¢è¥å…»ï¼Œæ­é…è‚‰è›‹å¥¶è±†åˆ¶å“+è”¬èœæ°´æœï¼Œé¿å…é¥®é£Ÿå•ä¸€å¯¼è‡´æŠµæŠ—åŠ›ä¸‹é™ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå……è¶³ç¡çœ ï¼Œé¿å…ç–²åŠ³ä½œä¸šï¼›æ¯å‘¨2~3æ¬¡å¿«èµ°ç­‰æœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„å…ç–«ã€‚""",
            "20-35": """**çƒè›‹ç™½æ­£å¸¸ï¼ˆ20 g/L â‰¤ Glob â‰¤ 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œé¿å…åé£Ÿæˆ–é«˜æ²¹é«˜ç³–é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé€‚é‡æ´»åŠ¨ï¼Œç»´æŒèº«ä½“çŠ¶æ€ã€‚""",
            ">35": """**çƒè›‹ç™½åé«˜ï¼ˆGlob > 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œå‡å°‘æ²¹è…»è¾›è¾£ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…å¸¦ç—…ä½œä¸šï¼›åå¤åé«˜å»ºè®®æŸ¥æ…¢æ€§ç‚ç—‡ã€‚"""
        },
        "FBG": {
            "<6.1": """**ç©ºè…¹è¡€ç³–æ­£å¸¸ï¼ˆFBG < 6.1 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šè§„å¾‹ä¸‰é¤ï¼Œä¸»é£Ÿç²—ç»†æ­é…ï¼Œæ§åˆ¶ç”œé£Ÿï¼Œé¿å…é¥¥ä¸€é¡¿é¥±ä¸€é¡¿ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åï¼Œä¿æŒæ—¥å¸¸æ´»åŠ¨é‡ï¼Œè§„å¾‹æœ‰æ°§è¿åŠ¨ã€‚""",
            "6.1-7.0": """**ç©ºè…¹è¡€ç³–åé«˜ï¼ˆ6.1 â‰¤ FBG < 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘ç²¾åˆ¶ç¢³æ°´å’Œå¤œå®µï¼Œæ§åˆ¶ä¸»é£Ÿé‡ï¼Œå¤šåƒå…¨è°·ç‰©å’Œè”¬èœï¼Œé¿å…é«˜ç³–é›¶é£ŸåŠ ç­è¡¥ç»™ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„èƒ°å²›ç´ æ•æ„Ÿæ€§ã€‚""",
            "â‰¥7.0": """**ç©ºè…¹è¡€ç³–æ˜æ˜¾å‡é«˜ï¼ˆFBG â‰¥ 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§ç³–å’Œç²¾åˆ¶ä¸»é£Ÿï¼Œæ¸…æ·¡é«˜çº¤ç»´é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šåŒ»ç”ŸæŒ‡å¯¼ä¸‹è¿åŠ¨ï¼Œé¿å…å¸¦ç—…é«˜å¼ºåº¦ä½œä¸šï¼Œå°½å¿«å°±åŒ»ã€‚"""
        },
        "AST": {
            "â‰¤40": """**è°·è‰è½¬æ°¨é…¶æ­£å¸¸ï¼ˆAST â‰¤ 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œé¿å…é«˜æ²¹é«˜è„‚å’Œé¥®é…’ï¼Œå‡è½»è‚è„è´Ÿæ‹…ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ç†¬å¤œå’Œç–²åŠ³ï¼Œé€‚åº¦æœ‰æ°§è¿åŠ¨ï¼Œç»´æŒèº«ä½“çŠ¶æ€ã€‚""",
            ">40": """**è°·è‰è½¬æ°¨é…¶å‡é«˜ï¼ˆAST > 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘æ²¹è…»å’Œé…’ç²¾ï¼Œå¤šåƒè”¬èœæ°´æœï¼Œæ¸…æ·¡é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…é«˜å¼ºåº¦ä½œä¸šï¼Œå¤æŸ¥è‚åŠŸèƒ½è°ƒæ•´ä½œä¸šå¼ºåº¦ã€‚"""
        },
        "BUN": {
            "<2.9": """**å°¿ç´ æ°®åä½ï¼ˆBUN < 2.9 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ ä¼˜è´¨è›‹ç™½ï¼Œé¿å…é¥®é£Ÿè¿‡äºæ¸…æ·¡æˆ–é£Ÿé‡ä¸è¶³ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…é«˜æ¶ˆè€—çŠ¶æ€ï¼Œæ”¹å–„ä»£è°¢ã€‚""",
            "2.9-8.2": """**å°¿ç´ æ°®æ­£å¸¸ï¼ˆ2.9 mmol/L â‰¤ BUN â‰¤ 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œè›‹ç™½é€‚é‡ï¼Œä½œä¸šæœŸé—´åˆç†è¡¥æ°´ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åï¼Œé€‚é‡æ´»åŠ¨ï¼Œç»´æŒä»£è°¢ã€‚""",
            ">8.2": """**å°¿ç´ æ°®åé«˜ï¼ˆBUN > 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶é«˜è›‹ç™½é¥®é£Ÿï¼Œå¢åŠ é¥®æ°´é‡ï¼Œé¥®é£Ÿæ¸…æ·¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…è„±æ°´å’Œç–²åŠ³ä½œä¸šï¼Œå¤šæ¬¡åé«˜æŸ¥è‚¾åŠŸèƒ½ã€‚"""
        },
        "è¡€å‹": {
            "æ­£å¸¸": """**è¡€å‹æ­£å¸¸ï¼ˆSBP < 140 ä¸” DBP < 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œæ§ç›æ§æ²¹ï¼Œå‡å°‘è…Œåˆ¶é£Ÿç‰©ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…ç´§å¼ ï¼Œé€‚é‡æœ‰æ°§è¿åŠ¨ã€‚""",
            "åé«˜": """**è¡€å‹åé«˜ï¼ˆSBP â‰¥ 140 æˆ– DBP â‰¥ 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼é™ç›ï¼Œå‡å°‘é«˜æ²¹é£Ÿç‰©ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå‡é‡å‡å‹ï¼Œæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œå®šæœŸç›‘æµ‹è¡€å‹ï¼Œå¿…è¦æ—¶å°±åŒ»ã€‚"""
        }
    },
    "å·¥åŠ¡äººå‘˜": {
        "BMI": {
            "<18.5": """**ä½ä½“é‡ï¼ˆBMI < 18.5ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ˜æ˜¾å¢åŠ æ€»èƒ½é‡å’Œä¼˜è´¨è›‹ç™½ï¼Œä¸‰é¤åŸºç¡€ä¸Šå¢åŠ é¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ï¼Œæ­é…ä¸»é£Ÿå’Œåšæœï¼Œé¿å…å¹²å¾—å¤šè¡¥å¾—å°‘ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šä¿è¯ä¼‘æ¯ï¼Œé€æ­¥å¢åŠ æŠ—é˜»è®­ç»ƒ+é€‚åº¦æœ‰æ°§è¿åŠ¨ï¼Œæ¯å‘¨2~3æ¬¡ï¼Œæé«˜é«˜å¼ºåº¦ä½œä¸šè€å—èƒ½åŠ›ã€‚""",
            "18.5-24": """**æ­£å¸¸ä½“é‡ï¼ˆ18.5 â‰¤ BMI < 24ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¿æŒå‡è¡¡é¥®é£Ÿï¼Œç¨³å®šä¸»é£Ÿã€è”¬èœå’Œä¼˜è´¨è›‹ç™½æ‘„å…¥ï¼Œé¿å…æ–½å·¥ç¯å¢ƒå½±å“é¥®é£Ÿè´¨é‡ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œç»“åˆæ‹‰ä¼¸å’ŒåŠ›é‡è®­ç»ƒï¼Œç»´æŒä½œä¸šè€åŠ›ã€‚""",
            "24-28": """**è¶…é‡ï¼ˆ24 â‰¤ BMI < 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶æ€»èƒ½é‡ï¼Œå‡å°‘ç²¾åˆ¶ç¢³æ°´ã€æ²¹ç‚¸é£Ÿå“ï¼Œä¸»é£Ÿç²—ç»†æ­é…ï¼Œä¿è¯è›‹ç™½æ‘„å…¥ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ—¥å¸¸ä½“åŠ›åŠ³åŠ¨åŸºç¡€ä¸Šï¼Œå¢åŠ å¿«èµ°ç­‰æœ‰æ°§è¿åŠ¨+æ¯å‘¨2æ¬¡åŠ›é‡è®­ç»ƒï¼Œå‡è½»å…³èŠ‚å¿ƒè‚ºè´Ÿæ‹…ã€‚""",
            "â‰¥28": """**è‚¥èƒ–ï¼ˆBMI â‰¥ 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šç³»ç»Ÿæ§åˆ¶æ€»èƒ½é‡ï¼Œå‡å°‘ç²¾åˆ¶ä¸»é£Ÿå’Œæ²¹ç‚¸é£Ÿå“ï¼Œæ¸…æ·¡é«˜çº¤ç»´+é€‚é‡ä¼˜è´¨è›‹ç™½ï¼Œé€æ­¥å‡é‡ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šèº«ä½“å…è®¸æ—¶æ¯å¤©45åˆ†é’Ÿæœ‰æ°§è¿åŠ¨+åŠ›é‡è®­ç»ƒï¼Œé¿å…å…³èŠ‚æŸä¼¤ï¼Œå¿…è¦æ—¶ä¸“ä¸šæŒ‡å¯¼ã€‚"""
        },
        "ALB": {
            "<40": """**ç™½è›‹ç™½åä½ï¼ˆAlb < 40 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šé‡ç‚¹è¡¥å……ä¼˜è´¨è›‹ç™½å’Œèƒ½é‡ï¼Œå¤šåƒé¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ï¼Œä¿è¯ä¸»é£Ÿå……è¶³ï¼Œé¿å…æ–½å·¥å¿™å‡‘åˆåƒé¥­ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šä¿è¯ä¼‘æ¯æ¢å¤ï¼Œé¿å…è¿ç»­é«˜å¼ºåº¦ä½œä¸šï¼›æ¯å‘¨2~3æ¬¡åŠ›é‡è®­ç»ƒ+è½»æœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„ä½“èƒ½æ¢å¤èƒ½åŠ›ã€‚""",
            "40-55": """**ç™½è›‹ç™½æ­£å¸¸ï¼ˆ40 g/L â‰¤ Alb â‰¤ 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¿æŒå‡è¡¡é¥®é£Ÿï¼Œç¨³å®šè›‹ç™½å’Œä¸»é£Ÿæ‘„å…¥ï¼Œé¿å…ä½œä¸šç¯å¢ƒé™ä½é¥®é£Ÿè´¨é‡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé€‚é‡è¿åŠ¨ï¼Œç»´æŒä½“åŠ›å‚¨å¤‡ã€‚""",
            ">55": """**ç™½è›‹ç™½åé«˜ï¼ˆAlb > 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ é¥®æ°´é‡ï¼Œå°¤å…¶é«˜æ¸©ä½œä¸šååŠæ—¶è¡¥æ°´ï¼Œé¥®é£Ÿæ¸…æ·¡å‡è¡¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šä½œä¸šä¸­åˆ†æ¬¡è¡¥æ°´ï¼Œé€‚åº¦æœ‰æ°§æ´»åŠ¨ï¼Œé¿å…è½»åº¦è„±æ°´ã€‚"""
        },
        "GLO": {
            "<20": """**çƒè›‹ç™½åä½ï¼ˆGlob < 20 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå…¨é¢è¥å…»ï¼Œæ­é…è‚‰è›‹å¥¶è±†åˆ¶å“+è”¬èœæ°´æœï¼Œé¿å…é¥®é£Ÿå•ä¸€å¯¼è‡´æŠµæŠ—åŠ›ä¸‹é™ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå……è¶³ç¡çœ ï¼Œé¿å…ç–²åŠ³æ–½å·¥ï¼›æ¯å‘¨2~3æ¬¡å¿«èµ°ç­‰æœ‰æ°§è¿åŠ¨ï¼Œå¢å¼ºä½“è´¨ã€‚""",
            "20-35": """**çƒè›‹ç™½æ­£å¸¸ï¼ˆ20 g/L â‰¤ Glob â‰¤ 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œé¿å…åé£Ÿæˆ–é«˜æ²¹é«˜ç›é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé€‚é‡æ´»åŠ¨ï¼Œç»´æŒå·¥ä½œè€åŠ›ã€‚""",
            ">35": """**çƒè›‹ç™½åé«˜ï¼ˆGlob > 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œå‡å°‘æ²¹è…»è¾›è¾£ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…å¸¦ç—…ä½œä¸šï¼›åå¤åé«˜æŸ¥æ…¢æ€§ç‚ç—‡ã€‚"""
        },
        "FBG": {
            "<6.1": """**ç©ºè…¹è¡€ç³–æ­£å¸¸ï¼ˆFBG < 6.1 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šè§„å¾‹ä¸‰é¤ï¼Œä¸»é£Ÿç²—ç»†æ­é…ï¼Œæ§åˆ¶ç”œé£Ÿï¼Œé¿å…é¥¥ä¸€é¡¿é¥±ä¸€é¡¿ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šä¿æŒæ—¥å¸¸æ´»åŠ¨é‡ï¼Œè§„å¾‹æœ‰æ°§è¿åŠ¨ï¼Œç»´æŒä»£è°¢ã€‚""",
            "6.1-7.0": """**ç©ºè…¹è¡€ç³–åé«˜ï¼ˆ6.1 â‰¤ FBG < 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘ç²¾åˆ¶ç¢³æ°´å’Œå¤œå®µï¼Œæ§åˆ¶ä¸»é£Ÿé‡ï¼Œå¤šåƒå…¨è°·ç‰©å’Œè”¬èœï¼Œé¿å…é«˜ç³–é›¶é£ŸåŠ ç­è¡¥ç»™ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„è¡€ç³–æ§åˆ¶ã€‚""",
            "â‰¥7.0": """**ç©ºè…¹è¡€ç³–æ˜æ˜¾å‡é«˜ï¼ˆFBG â‰¥ 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§ç³–å’Œç²¾åˆ¶ä¸»é£Ÿï¼Œæ¸…æ·¡é«˜çº¤ç»´é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šåŒ»ç”ŸæŒ‡å¯¼ä¸‹è¿åŠ¨ï¼Œé¿å…å¸¦ç—…é«˜å¼ºåº¦ä½œä¸šï¼Œå°½å¿«å°±åŒ»ã€‚"""
        },
        "AST": {
            "â‰¤40": """**è°·è‰è½¬æ°¨é…¶æ­£å¸¸ï¼ˆAST â‰¤ 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡è§„å¾‹é¥®é£Ÿï¼Œé¿å…é«˜æ²¹é«˜è„‚å’Œé¥®é…’ï¼Œå‡è½»è‚è„è´Ÿæ‹…ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ç†¬å¤œå’Œç–²åŠ³ï¼Œé€‚åº¦æ‹‰ä¼¸å’Œæœ‰æ°§æ´»åŠ¨ï¼Œä¿ƒè¿›æ¢å¤ã€‚""",
            ">40": """**è°·è‰è½¬æ°¨é…¶å‡é«˜ï¼ˆAST > 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘æ²¹è…»å’Œé…’ç²¾ï¼Œå¤šåƒè”¬èœæ°´æœï¼Œæ¸…æ·¡é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…é«˜å¼ºåº¦æ–½å·¥ï¼Œå¤æŸ¥è‚åŠŸèƒ½è°ƒæ•´ä½œä¸šå¼ºåº¦ã€‚"""
        },
        "BUN": {
            "<2.9": """**å°¿ç´ æ°®åä½ï¼ˆBUN < 2.9 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ ä¼˜è´¨è›‹ç™½ï¼Œé¿å…é¥®é£Ÿè¿‡äºæ¸…æ·¡æˆ–é£Ÿé‡ä¸è¶³ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…é•¿æœŸé«˜æ¶ˆè€—ï¼Œæ”¹å–„ä»£è°¢ã€‚""",
            "2.9-8.2": """**å°¿ç´ æ°®æ­£å¸¸ï¼ˆ2.9 mmol/L â‰¤ BUN â‰¤ 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œè›‹ç™½é€‚é‡ï¼Œä½œä¸šæœŸé—´åˆç†è¡¥æ°´ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åï¼Œé€‚é‡æ´»åŠ¨ï¼Œç»´æŒä»£è°¢ç¨³å®šã€‚""",
            ">8.2": """**å°¿ç´ æ°®åé«˜ï¼ˆBUN > 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶é«˜è›‹ç™½é¥®é£Ÿï¼Œå¢åŠ é¥®æ°´é‡ï¼Œé¥®é£Ÿæ¸…æ·¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…è„±æ°´å’Œç–²åŠ³æ–½å·¥ï¼Œå¤šæ¬¡åé«˜æŸ¥è‚¾åŠŸèƒ½ã€‚"""
        },
        "è¡€å‹": {
            "æ­£å¸¸": """**è¡€å‹æ­£å¸¸ï¼ˆSBP < 140 ä¸” DBP < 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œæ§ç›æ§æ²¹ï¼Œå‡å°‘è…Œåˆ¶é£Ÿç‰©ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…è¿‡åº¦åŠ³ç´¯ï¼Œé€‚é‡æœ‰æ°§è¿åŠ¨ã€‚""",
            "åé«˜": """**è¡€å‹åé«˜ï¼ˆSBP â‰¥ 140 æˆ– DBP â‰¥ 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼é™ç›ï¼Œå‡å°‘é«˜æ²¹é£Ÿç‰©ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå‡é‡å‡å‹ï¼Œæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œå®šæœŸç›‘æµ‹è¡€å‹ï¼Œå¿…è¦æ—¶å°±åŒ»ã€‚"""
        }
    },
    "è¡Œæ”¿åŠå…¶ä»–äººå‘˜": {
        "BMI": {
            "<18.5": """**ä½ä½“é‡ï¼ˆBMI < 18.5ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ æ€»èƒ½é‡å’Œä¼˜è´¨è›‹ç™½ï¼Œè§„å¾‹ä¸‰é¤ï¼Œå¤šåƒé¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰ï¼Œæ­é…ä¸»é£Ÿï¼Œé¿å…å·¥ä½œå¿™é¥®é£Ÿä¸è§„å¾‹ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šä¿è¯ä¼‘æ¯ï¼ŒåŠ›é‡è®­ç»ƒ+é€‚åº¦æœ‰æ°§è¿åŠ¨ï¼Œæ¯å‘¨2~3æ¬¡ï¼Œå¢åŠ è‚Œè‚‰é‡å’Œä½“åŠ›ã€‚""",
            "18.5-24": """**æ­£å¸¸ä½“é‡ï¼ˆ18.5 â‰¤ BMI < 24ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¿æŒå‡è¡¡é¥®é£Ÿï¼Œé¿å…é«˜æ²¹é«˜ç³–é›¶é£Ÿå’Œå«ç³–é¥®æ–™ï¼Œé˜²æ­¢ä¹…åå¯¼è‡´ä½“é‡ä¸Šå‡ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åï¼Œæ¯å¤©å›ºå®šæ´»åŠ¨æ—¶é—´ï¼Œæ¯å‘¨è‡³å°‘150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨ã€‚""",
            "24-28": """**è¶…é‡ï¼ˆ24 â‰¤ BMI < 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ§åˆ¶æ€»èƒ½é‡ï¼Œå‡å°‘ç²¾åˆ¶ç¢³æ°´ã€æ²¹ç‚¸é£Ÿå“å’Œç”œé£Ÿï¼Œå¢åŠ è”¬èœå’Œå…¨è°·ç‰©æ¯”ä¾‹ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œé€æ­¥å¢åŠ æ´»åŠ¨é‡ï¼Œå‡å°‘ä¹…åã€‚""",
            "â‰¥28": """**è‚¥èƒ–ï¼ˆBMI â‰¥ 28ï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šç³»ç»Ÿæ§åˆ¶æ€»èƒ½é‡ï¼Œå‡å°‘ç²¾åˆ¶ä¸»é£Ÿå’Œæ²¹ç‚¸é£Ÿå“ï¼Œæ¸…æ·¡é«˜çº¤ç»´+é€‚é‡ä¼˜è´¨è›‹ç™½ï¼Œé€æ­¥å‡é‡ã€‚
            - **è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©45åˆ†é’Ÿæœ‰æ°§è¿åŠ¨+åŠ›é‡è®­ç»ƒï¼Œå¿…è¦æ—¶ä¸“ä¸šæŒ‡å¯¼ã€‚"""
        },
        "ALB": {
            "<40": """**ç™½è›‹ç™½åä½ï¼ˆAlb < 40 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šè¡¥å……ä¼˜è´¨è›‹ç™½å’Œèƒ½é‡ï¼Œä¿è¯æ¯å¤©é¸¡è›‹ã€ç‰›å¥¶ã€é±¼ã€ç˜¦è‚‰æ‘„å…¥ï¼Œé¿å…ä¸åƒæ—©é¥­æˆ–é›¶é£Ÿæ›¿ä»£æ­£é¤ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè°ƒæ•´ä½œæ¯ï¼Œé¿å…ç†¬å¤œåŠ ç­ï¼›æ¯å‘¨2~3æ¬¡åŠ›é‡è®­ç»ƒ+æœ‰æ°§è¿åŠ¨ï¼Œæ”¹å–„æœºä½“åˆæˆèƒ½åŠ›ã€‚""",
            "40-55": """**ç™½è›‹ç™½æ­£å¸¸ï¼ˆ40 g/L â‰¤ Alb â‰¤ 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¿æŒå‡è¡¡é¥®é£Ÿï¼Œé¿å…å·¥ä½œå¿™ç”¨é›¶é£Ÿå¤–å–æ›¿ä»£æ­£é¤ï¼Œç¨³å®šè›‹ç™½å’Œä¸»é£Ÿæ‘„å…¥ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé€‚é‡è¿åŠ¨ï¼Œç»´æŒè¥å…»çŠ¶æ€ã€‚""",
            ">55": """**ç™½è›‹ç™½åé«˜ï¼ˆAlb > 55 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ é¥®æ°´é‡ï¼Œä¹…ååŠå…¬æ—¶ä¸»åŠ¨è¡¥æ°´ï¼Œé¥®é£Ÿæ¸…æ·¡å‡è¡¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ¯éš”1å°æ—¶èµ·èº«æ´»åŠ¨è¡¥æ°´ï¼Œé€‚åº¦æœ‰æ°§æ´»åŠ¨ï¼Œé¿å…è½»åº¦è„±æ°´ã€‚"""
        },
        "GLO": {
            "<20": """**çƒè›‹ç™½åä½ï¼ˆGlob < 20 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå…¨é¢è¥å…»ï¼Œæ­é…è‚‰è›‹å¥¶è±†åˆ¶å“+è”¬èœæ°´æœï¼Œé¿å…é¥®é£Ÿå•ä¸€ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå……è¶³ç¡çœ ï¼Œå‡å°‘ç†¬å¤œï¼Œæ¯å‘¨2~3æ¬¡è§„å¾‹è¿åŠ¨ï¼Œå¢å¼ºæŠµæŠ—åŠ›ã€‚""",
            "20-35": """**çƒè›‹ç™½æ­£å¸¸ï¼ˆ20 g/L â‰¤ Glob â‰¤ 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œé¿å…åé£Ÿæˆ–é«˜æ²¹é«˜ç³–é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé€‚é‡æ´»åŠ¨ï¼Œç»´æŒå…ç–«çŠ¶æ€ã€‚""",
            ">35": """**çƒè›‹ç™½åé«˜ï¼ˆGlob > 35 g/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œå‡å°‘æ²¹è…»è¾›è¾£ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ³¨æ„ä¼‘æ¯ï¼Œé¿å…ç†¬å¤œï¼›åå¤åé«˜æŸ¥æ…¢æ€§ç‚ç—‡ã€‚"""
        },
        "FBG": {
            "<6.1": """**ç©ºè…¹è¡€ç³–æ­£å¸¸ï¼ˆFBG < 6.1 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šè§„å¾‹ä¸‰é¤ï¼Œä¸»é£Ÿç²—ç»†æ­é…ï¼Œæ§åˆ¶ç”œé£Ÿå’Œå«ç³–é¥®æ–™ï¼Œé¿å…è¾¹å·¥ä½œè¾¹åƒé›¶é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå‡å°‘ä¹…åï¼Œæ¯å¤©å›ºå®šæ´»åŠ¨æ—¶é—´ï¼Œç»´æŒä»£è°¢ã€‚""",
            "6.1-7.0": """**ç©ºè…¹è¡€ç³–åé«˜ï¼ˆ6.1 â‰¤ FBG < 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘ç²¾åˆ¶ç¢³æ°´å’Œç”œé£Ÿï¼Œæ§åˆ¶ä¸»é£Ÿé‡ï¼Œå¤šåƒå…¨è°·ç‰©å’Œè”¬èœï¼Œé¿å…é›¶é£Ÿç»­å‘½ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œå‡å°‘è¿ç»­ä¹…åã€‚""",
            "â‰¥7.0": """**ç©ºè…¹è¡€ç³–æ˜æ˜¾å‡é«˜ï¼ˆFBG â‰¥ 7.0 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼æ§ç³–å’Œç²¾åˆ¶ä¸»é£Ÿï¼Œæ¸…æ·¡é«˜çº¤ç»´é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šåŒ»ç”ŸæŒ‡å¯¼ä¸‹è§„èŒƒç®¡ç†ï¼Œé¿å…å¿½è§†è¡€ç³–é—®é¢˜ã€‚"""
        },
        "AST": {
            "â‰¤40": """**è°·è‰è½¬æ°¨é…¶æ­£å¸¸ï¼ˆAST â‰¤ 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œé¿å…é¢‘ç¹é¥®é…’å’Œé«˜æ²¹é«˜è„‚é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ç†¬å¤œï¼Œå¢åŠ è§„å¾‹è¿åŠ¨ï¼Œç»´æŒè‚è„åŠŸèƒ½ã€‚""",
            ">40": """**è°·è‰è½¬æ°¨é…¶å‡é«˜ï¼ˆAST > 40 U/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘æ²¹è…»å’Œé…’ç²¾ï¼Œå¤šåƒè”¬èœæ°´æœï¼Œæ¸…æ·¡é¥®é£Ÿã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè°ƒæ•´ä½œæ¯ï¼Œå‡å°‘åº”é…¬ç†¬å¤œï¼Œå¤æŸ¥è‚åŠŸèƒ½æ’æŸ¥è„‚è‚ªè‚ã€‚"""
        },
        "BUN": {
            "<2.9": """**å°¿ç´ æ°®åä½ï¼ˆBUN < 2.9 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå¢åŠ ä¼˜è´¨è›‹ç™½ï¼Œé¿å…é¥®é£Ÿè¿‡äºæ¸…æ·¡æˆ–é£Ÿé‡ä¸è¶³ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šè§„å¾‹ä½œæ¯ï¼Œé¿å…ä½æ‘„å…¥ä½æ´»åŠ¨çŠ¶æ€ã€‚""",
            "2.9-8.2": """**å°¿ç´ æ°®æ­£å¸¸ï¼ˆ2.9 mmol/L â‰¤ BUN â‰¤ 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡è¡¡é¥®é£Ÿï¼Œè›‹ç™½é€‚é‡ï¼Œæ—¥å¸¸ä¸»åŠ¨è¡¥æ°´ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åï¼Œé€‚é‡æ´»åŠ¨ï¼Œç»´æŒä»£è°¢ã€‚""",
            ">8.2": """**å°¿ç´ æ°®åé«˜ï¼ˆBUN > 8.2 mmol/Lï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šå‡å°‘é«˜è›‹ç™½é¥®é£Ÿï¼Œå¢åŠ é¥®æ°´é‡ï¼Œé¥®é£Ÿæ¸…æ·¡ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åç¼ºæ°´ï¼Œå¤šæ¬¡åé«˜æŸ¥è‚¾åŠŸèƒ½ã€‚"""
        },
        "è¡€å‹": {
            "æ­£å¸¸": """**è¡€å‹æ­£å¸¸ï¼ˆSBP < 140 ä¸” DBP < 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šæ¸…æ·¡é¥®é£Ÿï¼Œæ§ç›æ§æ²¹ï¼Œå‡å°‘å¤–å–å’Œè…Œåˆ¶é£Ÿå“ã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šé¿å…ä¹…åå’Œç²¾ç¥ç´§å¼ ï¼Œè§„å¾‹æœ‰æ°§è¿åŠ¨ã€‚""",
            "åé«˜": """**è¡€å‹åé«˜ï¼ˆSBP â‰¥ 140 æˆ– DBP â‰¥ 90 mmHgï¼‰**
            - **é¥®é£Ÿå»ºè®®**ï¼šä¸¥æ ¼é™ç›ï¼Œå‡å°‘é«˜æ²¹é£Ÿç‰©ï¼Œå¤šåƒè”¬èœæ°´æœã€‚
            - **ç”Ÿæ´»è¿åŠ¨å»ºè®®**ï¼šå‡é‡å‡å‹ï¼Œæ¯å¤©30åˆ†é’Ÿæœ‰æ°§è¿åŠ¨ï¼Œå®šæœŸç›‘æµ‹è¡€å‹ï¼Œå¿…è¦æ—¶å°±åŒ»ã€‚"""
        }
    }
}

# ===================== é€šç”¨å‡½æ•°å°è£…ï¼ˆä¼˜åŒ–ï¼šå‡å°‘å†—ä½™ä»£ç ï¼Œæå‡å¯ç»´æŠ¤æ€§ï¼‰ =====================
def load_model_safely(model_path):
    """å®‰å…¨åŠ è½½æ¨¡å‹ï¼Œæ·»åŠ å¼‚å¸¸æ•è·"""
    try:
        model = joblib.load(model_path)
        return model, None
    except FileNotFoundError:
        return None, f"æ¨¡å‹æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œè¯·ç¡®è®¤ {model_path} å­˜åœ¨äºå½“å‰ç›®å½•ä¸‹ã€‚"
    except Exception as e:
        return None, f"æ¨¡å‹åŠ è½½å¤±è´¥ï¼š{str(e)}"

def validate_inputs(input_data):
    """æ ¡éªŒè¾“å…¥æ•°æ®çš„åˆæ³•æ€§"""
    errors = []
    for feat_name, feat_value in input_data.items():
        config = FEATURE_CONFIG[feat_name]
        if feat_value < config["min"] or feat_value > config["max"]:
            errors.append(
                f"{config['cn_name']}ï¼ˆ{feat_name}ï¼‰è¾“å…¥å¼‚å¸¸ï¼Œåº”åœ¨ {config['min']} ~ {config['max']} {config['unit']} èŒƒå›´å†…ã€‚"
            )
    return errors

def display_indicator_advice(current_job, indicator, value, advice_dict):
    """ç»Ÿä¸€å±•ç¤ºå•ä¸ªæŒ‡æ ‡çš„ä¸ªæ€§åŒ–å»ºè®®"""
    if indicator not in advice_dict[current_job]:
        return
    indicator_advice = advice_dict[current_job][indicator]
    st.markdown(f"### {FEATURE_CONFIG.get(indicator, {'cn_name': indicator})['cn_name']}ï¼ˆ{indicator}ï¼‰å»ºè®®")
    
    # é’ˆå¯¹ä¸åŒæŒ‡æ ‡çš„é˜ˆå€¼åˆ¤æ–­
    if indicator == "BMI":
        if value < 18.5:
            st.markdown(indicator_advice["<18.5"])
        elif 18.5 <= value < 24:
            st.markdown(indicator_advice["18.5-24"])
        elif 24 <= value < 28:
            st.markdown(indicator_advice["24-28"])
        else:
            st.markdown(indicator_advice["â‰¥28"])
    elif indicator == "ALB":
        if value < 40:
            st.markdown(indicator_advice["<40"])
        elif 40 <= value <= 55:
            st.markdown(indicator_advice["40-55"])
        else:
            st.markdown(indicator_advice[">55"])
    elif indicator == "GLO":
        if value < 20:
            st.markdown(indicator_advice["<20"])
        elif 20 <= value <= 35:
            st.markdown(indicator_advice["20-35"])
        else:
            st.markdown(indicator_advice[">35"])
    elif indicator == "FBG":
        if value < 6.1:
            st.markdown(indicator_advice["<6.1"])
        elif 6.1 <= value < 7.0:
            st.markdown(indicator_advice["6.1-7.0"])
        else:
            st.markdown(indicator_advice["â‰¥7.0"])
    elif indicator == "AST":
        if value <= 40:
            st.markdown(indicator_advice["â‰¤40"])
        else:
            st.markdown(indicator_advice[">40"])
    elif indicator == "BUN":
        if value < 2.9:
            st.markdown(indicator_advice["<2.9"])
        elif 2.9 <= value <= 8.2:
            st.markdown(indicator_advice["2.9-8.2"])
        else:
            st.markdown(indicator_advice[">8.2"])
    # æ·»åŠ åˆ†éš”çº¿ï¼Œæå‡å¯è¯»æ€§
    st.divider()

# ===================== Streamlit ç•Œé¢æ„å»º =====================
def main():
    # é¡µé¢æ ‡é¢˜ä¸è¯´æ˜
    st.set_page_config(page_title="åŠ¨è„‰ç¡¬åŒ–é¢„æµ‹å™¨", layout="wide")
    st.title("åŠ¨è„‰ç¡¬åŒ–é¢„æµ‹å™¨")
    st.caption("æ¸©é¦¨æç¤ºï¼šæœ¬å·¥å…·ä»…ä½œå¥åº·å‚è€ƒï¼Œä¸æ›¿ä»£ä¸“ä¸šåŒ»ç”Ÿè¯Šæ–­ï¼Œè¯·ç»“åˆä¸´åºŠæ£€æŸ¥ç»“æœåˆ¤æ–­ã€‚")
    
    # å®‰å…¨åŠ è½½æ¨¡å‹
    model, model_error = load_model_safely(MODEL_PATH)
    if model_error:
        st.error(model_error)
        return
    
    # è¾“å…¥åŒºåŸŸï¼ˆä¼˜åŒ–ï¼šæŠ˜å é¢æ¿+åˆ†æ å¸ƒå±€ï¼Œç•Œé¢æ›´æ•´æ´ï¼‰
    with st.expander("ğŸ“ å¡«å†™ä¸ªäººä¿¡æ¯ä¸æ£€æµ‹æŒ‡æ ‡", expanded=True):
        col1, col2 = st.columns(2)
        
        with col1:
            # å²—ä½é€‰æ‹©ï¼ˆç›´æ¥ä¸­æ–‡ï¼Œæ— éœ€æ•°å­—ï¼‰
            selected_job = st.selectbox("å²—ä½ï¼š", options=JOB_OPTIONS, index=0)
            
            # è¾“å…¥é¡¹1
            AGE = st.number_input(
                f"{FEATURE_CONFIG['AGE']['cn_name']}(AGE) {FEATURE_CONFIG['AGE']['unit']}",
                min_value=FEATURE_CONFIG['AGE']['min'],
                max_value=FEATURE_CONFIG['AGE']['max'],
                value=30,
                step=1 if not FEATURE_CONFIG['AGE']['is_float'] else 0.1
            )
            ALB = st.number_input(
                f"{FEATURE_CONFIG['ALB']['cn_name']}(ALB) {FEATURE_CONFIG['ALB']['unit']}",
                min_value=FEATURE_CONFIG['ALB']['min'],
                max_value=FEATURE_CONFIG['ALB']['max'],
                value=45,
                step=1 if not FEATURE_CONFIG['ALB']['is_float'] else 0.1
            )
            GLO = st.number_input(
                f"{FEATURE_CONFIG['GLO']['cn_name']}(GLO) {FEATURE_CONFIG['GLO']['unit']}",
                min_value=FEATURE_CONFIG['GLO']['min'],
                max_value=FEATURE_CONFIG['GLO']['max'],
                value=28,
                step=1 if not FEATURE_CONFIG['GLO']['is_float'] else 0.1
            )
            FBG = st.number_input(
                f"{FEATURE_CONFIG['FBG']['cn_name']}(FBG) {FEATURE_CONFIG['FBG']['unit']}",
                min_value=FEATURE_CONFIG['FBG']['min'],
                max_value=FEATURE_CONFIG['FBG']['max'],
                value=5.0,
                step=1 if not FEATURE_CONFIG['FBG']['is_float'] else 0.1
            )
        
        with col2:
            SBP = st.number_input(
                f"{FEATURE_CONFIG['SBP']['cn_name']}(SBP) {FEATURE_CONFIG['SBP']['unit']}",
                min_value=FEATURE_CONFIG['SBP']['min'],
                max_value=FEATURE_CONFIG['SBP']['max'],
                value=120.0,
                step=1 if not FEATURE_CONFIG['SBP']['is_float'] else 0.1
            )
            AST = st.number_input(
                f"{FEATURE_CONFIG['AST']['cn_name']}(AST) {FEATURE_CONFIG['AST']['unit']}",
                min_value=FEATURE_CONFIG['AST']['min'],
                max_value=FEATURE_CONFIG['AST']['max'],
                value=30,
                step=1 if not FEATURE_CONFIG['AST']['is_float'] else 0.1
            )
            DBP = st.number_input(
                f"{FEATURE_CONFIG['DBP']['cn_name']}(DBP) {FEATURE_CONFIG['DBP']['unit']}",
                min_value=FEATURE_CONFIG['DBP']['min'],
                max_value=FEATURE_CONFIG['DBP']['max'],
                value=80.0,
                step=1 if not FEATURE_CONFIG['DBP']['is_float'] else 0.1
            )
            BUN = st.number_input(
                f"{FEATURE_CONFIG['BUN']['cn_name']}(BUN) {FEATURE_CONFIG['BUN']['unit']}",
                min_value=FEATURE_CONFIG['BUN']['min'],
                max_value=FEATURE_CONFIG['BUN']['max'],
                value=5,
                step=1 if not FEATURE_CONFIG['BUN']['is_float'] else 0.1
            )
            BMI = st.number_input(
                f"{FEATURE_CONFIG['BMI']['cn_name']}(BMI) {FEATURE_CONFIG['BMI']['unit']}",
                min_value=FEATURE_CONFIG['BMI']['min'],
                max_value=FEATURE_CONFIG['BMI']['max'],
                value=22,
                step=1 if not FEATURE_CONFIG['BMI']['is_float'] else 0.1
            )
    
    # æ•´ç†è¾“å…¥æ•°æ®
    feature_values = [AGE, ALB, GLO, FBG, SBP, AST, DBP, BUN, BMI]
    input_data = dict(zip(FEATURE_NAMES, feature_values))
    
    # é¢„æµ‹æŒ‰é’®ä¸é€»è¾‘ï¼ˆä¼˜åŒ–ï¼šè¾“å…¥æ ¡éªŒ+åŠ è½½çŠ¶æ€+å¼‚å¸¸æ•è·ï¼‰
    col_btn1, col_btn2 = st.columns(2)
    with col_btn1:
        predict_btn = st.button("ğŸ” å¼€å§‹é¢„æµ‹", type="primary")
    with col_btn2:
        reset_btn = st.button("ğŸ”„ é‡ç½®è¾“å…¥")
    
    # é‡ç½®åŠŸèƒ½
    if reset_btn:
        st.rerun()
    
    if predict_btn:
        # ç¬¬ä¸€æ­¥ï¼šè¾“å…¥åˆæ³•æ€§æ ¡éªŒ
        input_errors = validate_inputs(input_data)
        if input_errors:
            st.warning("è¯·ä¿®æ­£ä»¥ä¸‹è¾“å…¥å¼‚å¸¸åå†è¿›è¡Œé¢„æµ‹ï¼š")
            for error in input_errors:
                st.write(f"â€¢ {error}")
            return
        
        # ç¬¬äºŒæ­¥ï¼šæ•°æ®æ ¼å¼åŒ–ä¸å‡†å¤‡
        # ç®€åŒ–å°æ•°æ ¼å¼åŒ–ï¼Œé’ˆå¯¹ä¸åŒç±»å‹æŒ‡æ ‡ä¼˜åŒ–
        formatted_feature_values = []
        for val, feat in zip(feature_values, FEATURE_NAMES):
            if FEATURE_CONFIG[feat]['is_float']:
                formatted_val = float(Decimal(str(val)).quantize(Decimal('0.00'), rounding=ROUND_HALF_UP))
            else:
                formatted_val = int(val)
            formatted_feature_values.append(formatted_val)
        
        features = np.array([formatted_feature_values], dtype=np.float32)
        features_df = pd.DataFrame(features, columns=FEATURE_NAMES, dtype=np.float32)
        
        # ç¬¬ä¸‰æ­¥ï¼šæ¨¡å‹é¢„æµ‹ä¸ç»“æœå±•ç¤ºï¼ˆåŒ…è£¹åŠ è½½çŠ¶æ€ï¼‰
        with st.spinner("æ­£åœ¨è¿›è¡Œé¢„æµ‹ä¸ç»“æœåˆ†æï¼Œè¯·ç¨å€™..."):
            try:
                predicted_class = model.predict(features)[0]
                predicted_proba = model.predict_proba(features)[0]
                
                # ä¼˜åŒ–é¢„æµ‹ç»“æœå±•ç¤ºï¼ˆç›´ç™½æ–‡å­—+æŒ‡æ ‡å¡ç‰‡ï¼‰
                st.subheader("ğŸ“Š é¢„æµ‹ç»“æœ")
                result_col1, result_col2 = st.columns(2)
                
                with result_col1:
                    if predicted_class == 1:
                        st.metric("é¢„æµ‹ç»“è®º", "æœ‰åŠ¨è„‰ç¡¬åŒ–é£é™©", "éœ€å…³æ³¨")
                        risk_prob = predicted_proba[1] * 100
                        advice = (
                            f"æ ¹æ®æ¨¡å‹é¢„æµ‹ï¼Œä½ æœ‰è¾ƒé«˜çš„åŠ¨è„‰ç¡¬åŒ–é£é™©ã€‚\n"
                            f"æ¨¡å‹é¢„æµ‹ä½ æ‚£æœ‰åŠ¨è„‰ç¡¬åŒ–çš„æ¦‚ç‡ä¸º {risk_prob:.1f}%ã€‚\n"
                            "ğŸ’¡ å»ºè®®åŠæ—¶å’¨è¯¢å¿ƒè¡€ç®¡ç§‘åŒ»ç”Ÿï¼Œè¿›è¡Œé¢ˆåŠ¨è„‰è¶…å£°ç­‰è¿›ä¸€æ­¥æ£€æŸ¥å’Œä¸“ä¸šå¹²é¢„ã€‚"
                        )
                    else:
                        st.metric("é¢„æµ‹ç»“è®º", "æ— æ˜æ˜¾åŠ¨è„‰ç¡¬åŒ–é£é™©", "çŠ¶æ€è‰¯å¥½")
                        safe_prob = predicted_proba[0] * 100
                        advice = (
                            f"æ ¹æ®æ¨¡å‹é¢„æµ‹ï¼Œä½ æ‚£åŠ¨è„‰ç¡¬åŒ–çš„é£é™©è¾ƒä½ã€‚\n"
                            f"æ¨¡å‹é¢„æµ‹ä½ æ— åŠ¨è„‰ç¡¬åŒ–çš„æ¦‚ç‡ä¸º {safe_prob:.1f}%ã€‚\n"
                            "ğŸ’¡ å»ºè®®ä¿æŒå½“å‰å¥åº·çš„ç”Ÿæ´»æ–¹å¼ï¼Œå¹¶å®šæœŸè¿›è¡Œå¹´åº¦ä½“æ£€ï¼ŒæŒç»­ç›‘æµ‹æŒ‡æ ‡å˜åŒ–ã€‚"
                        )
                    st.success(advice)
                
                with result_col2:
                    st.metric("é¢„æµ‹ç½®ä¿¡åº¦", f"{max(predicted_proba)*100:.1f}%", "")
                    proba_df = pd.DataFrame({
                        "ç»“æœç±»åˆ«": ["æ— åŠ¨è„‰ç¡¬åŒ–", "æœ‰åŠ¨è„‰ç¡¬åŒ–"],
                        "å¯¹åº”æ¦‚ç‡": [f"{predicted_proba[0]*100:.2f}%", f"{predicted_proba[1]*100:.2f}%"]
                    })
                    st.dataframe(proba_df, use_container_width=True)
                
                # ç¬¬å››æ­¥ï¼šSHAPå›¾ç”Ÿæˆä¸å±•ç¤ºï¼ˆä¼˜åŒ–ï¼šç®€åŒ–é€»è¾‘ï¼Œé¿å…è£å‰ªï¼‰
                st.subheader("ğŸ“ˆ é¢„æµ‹ç»“æœè§£é‡Šï¼ˆSHAP Force Plotï¼‰")
                try:
                    explainer = shap.TreeExplainer(model)
                    shap_values = explainer.shap_values(features_df)
                    if isinstance(shap_values, list) and len(shap_values) == 2:
                        shap_values = shap_values[1]
                    
                    # ç”ŸæˆSHAPå›¾
                    buf = io.BytesIO()
                    shap.force_plot(
                        explainer.expected_value[1] if isinstance(explainer.expected_value, list) else explainer.expected_value,
                        shap_values[0],
                        features_df.iloc[0],
                        feature_names=FEATURE_NAMES,
                        out_names="åŠ¨è„‰ç¡¬åŒ–æ‚£ç—…æ¦‚ç‡",
                        show=False,
                        matplotlib=True
                    )
                    plt.tight_layout()
                    plt.savefig(buf, format='png', bbox_inches='tight', dpi=150)
                    buf.seek(0)
                    img = Image.open(buf)
                    st.image(img, use_column_width=True)
                    plt.close('all')
                    
                    # SHAPå›¾è¯´æ˜
                    with st.expander("ğŸ“– SHAPå›¾è§£è¯»è¯´æ˜"):
                        st.write("""
                        - ğŸ”´ çº¢è‰²ç‰¹å¾ï¼šè¯¥æŒ‡æ ‡æ•°å€¼åé«˜ï¼Œ**å¢åŠ **åŠ¨è„‰ç¡¬åŒ–æ‚£ç—…æ¦‚ç‡ï¼›
                        - ğŸ”µ è“è‰²ç‰¹å¾ï¼šè¯¥æŒ‡æ ‡æ•°å€¼åä½ï¼Œ**é™ä½**åŠ¨è„‰ç¡¬åŒ–æ‚£ç—…æ¦‚ç‡ï¼›
                        - ç‰¹å¾æ¡é•¿åº¦ï¼šä»£è¡¨è¯¥æŒ‡æ ‡å¯¹æœ¬æ¬¡é¢„æµ‹ç»“æœçš„å½±å“ç¨‹åº¦ï¼ˆè¶Šé•¿å½±å“è¶Šå¤§ï¼‰ï¼›
                        - ä¸­é—´æ•°å€¼ï¼šæ¨¡å‹çš„åŸºç¡€é¢„æµ‹æ¦‚ç‡ï¼Œä¸¤ä¾§ç‰¹å¾å…±åŒä½œç”¨æœ€ç»ˆå¾—åˆ°å³ä¾§é¢„æµ‹ç»“æœã€‚
                        """)
                    
                except Exception as shap_error:
                    st.warning(f"SHAPå›¾ç”Ÿæˆå¤±è´¥ï¼š{str(shap_error)}")
                
                # ç¬¬äº”æ­¥ï¼šç‰¹å¾ç¼©å†™å¯¹ç…§è¡¨
                st.subheader("ğŸ“‹ ç‰¹å¾ç¼©å†™å¯¹ç…§è¡¨")
                abbr_data = [
                    [feat, FEATURE_CONFIG[feat]['cn_name'], FEATURE_CONFIG[feat]['unit']]
                    for feat in FEATURE_NAMES
                ]
                abbr_df = pd.DataFrame(abbr_data, columns=["è‹±æ–‡ç¼©å†™", "ä¸­æ–‡å«ä¹‰", "å•ä½"])
                st.dataframe(abbr_df, use_container_width=True)
                
                # ç¬¬å…­æ­¥ï¼šä¸ªæ€§åŒ–å¥åº·å»ºè®®ï¼ˆä¼˜åŒ–ï¼šè°ƒç”¨å°è£…å‡½æ•°ï¼Œå‡å°‘å†—ä½™ï¼‰
                st.subheader(f"ğŸ’ª {selected_job} ä¸ªæ€§åŒ–å¥åº·å»ºè®®")
                st.caption("æ ¹æ®ä½ çš„æ£€æµ‹æŒ‡æ ‡ï¼Œç”Ÿæˆé’ˆå¯¹æ€§é¥®é£Ÿä¸ç”Ÿæ´»è¿åŠ¨å»ºè®®ï¼š")
                
                # è°ƒç”¨å°è£…å‡½æ•°å±•ç¤ºå„æŒ‡æ ‡å»ºè®®
                display_indicator_advice(selected_job, "BMI", BMI, job_advice_dict)
                display_indicator_advice(selected_job, "ALB", ALB, job_advice_dict)
                display_indicator_advice(selected_job, "GLO", GLO, job_advice_dict)
                display_indicator_advice(selected_job, "FBG", FBG, job_advice_dict)
                display_indicator_advice(selected_job, "AST", AST, job_advice_dict)
                display_indicator_advice(selected_job, "BUN", BUN, job_advice_dict)
                
                # è¡€å‹å»ºè®®ï¼ˆå•ç‹¬å¤„ç†ï¼Œéæ™®é€šæŒ‡æ ‡ï¼‰
                st.markdown("### è¡€å‹ï¼ˆSBP/DBPï¼‰å»ºè®®")
                if SBP < 140 and DBP < 90:
                    st.markdown(job_advice_dict[selected_job]["è¡€å‹"]["æ­£å¸¸"])
                else:
                    st.markdown(job_advice_dict[selected_job]["è¡€å‹"]["åé«˜"])
                st.divider()
                
            except Exception as predict_error:
                st.error(f"é¢„æµ‹è¿‡ç¨‹å‡ºç°å¼‚å¸¸ï¼š{str(predict_error)}")

if __name__ == "__main__":
    main()
